import"./main-BPkS1OeY.js";const f="https://corsproxy.io/?url=",v="janusrvk",D="74f09a6e65ddc20949e95f2a014cd3ee";async function C(){const t=document.getElementById("lastfm-content");try{const n=(await(await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${v}&api_key=${D}&format=json&limit=5`)).json()).recenttracks?.track?.slice(0,5);if(!n||n.length===0){t.innerHTML='<p class="interest-placeholder">Geen recente tracks gevonden.</p>';return}const l=n.map(e=>{const c=e["@attr"]?.nowplaying==="true",s=e.image?.find(d=>d.size==="extralarge")?.["#text"]||e.image?.find(d=>d.size==="large")?.["#text"]||e.image?.find(d=>d.size==="medium")?.["#text"],a=e.artist?.["#text"]||e.artist,i=e.name,m=e.album?.["#text"];return`
        <a href="${e.url}" target="_blank" rel="noopener" class="feed-item${c?" now-playing":""}">
          ${s?`<img src="${s}" alt="${i}" class="feed-art feed-art-music" />`:'<div class="feed-art feed-art-music feed-art-empty"></div>'}
          <div class="feed-info">
            <span class="feed-title">${i}</span>
            <span class="feed-meta">${a}${m?` — ${m}`:""}</span>
          </div>
          ${c?'<span class="lastfm-live">Nu aan het luisteren</span>':""}
        </a>
      `}).join("");t.innerHTML=l}catch{t.innerHTML='<p class="interest-placeholder">Kon Last.fm niet laden.</p>'}}C();setInterval(C,3e4);const _="janusrvk";async function A(){const t=document.getElementById("letterboxd-content");try{const o=await(await fetch(`${f}${encodeURIComponent(`https://letterboxd.com/${_}/rss/`)}`)).text(),n=new DOMParser,l=n.parseFromString(o,"text/xml"),e=Array.from(l.querySelectorAll("item")).slice(0,5);if(e.length===0){t.innerHTML='<p class="interest-placeholder">Geen recente films gevonden.</p>';return}const c=e.map(s=>{const a=s.querySelector("title")?.textContent||"",i=s.querySelector("link")?.textContent||"#",m=s.querySelector("description")?.textContent||"",u=n.parseFromString(m,"text/html").querySelector("img")?.getAttribute("src")||"",y=a.match(/★+½?/),x=y?y[0]:"",w=a.replace(/,\s*\d{4}\s*-\s*★+½?/,"").replace(/,\s*\d{4}/,"").trim(),S=a.match(/,\s*(\d{4})/),$=S?S[1]:"";return`
        <a href="${i}" target="_blank" rel="noopener" class="feed-item">
          ${u?`<img src="${u}" alt="${w}" class="feed-art" />`:'<div class="feed-art feed-art-empty"></div>'}
          <div class="feed-info">
            <span class="feed-title">${w}${$?` (${$})`:""}</span>
            ${x?`<span class="feed-meta">${x}</span>`:""}
          </div>
        </a>
      `}).join("");t.innerHTML=c}catch{t.innerHTML='<p class="interest-placeholder">Kon Letterboxd niet laden.</p>'}}A();const g="161530834";async function M(){const t=document.getElementById("goodreads-content");try{const o=await(await fetch(`${f}${encodeURIComponent(`https://www.goodreads.com/review/list_rss/${g}?shelf=currently-reading`)}`)).text(),n=new DOMParser,l=n.parseFromString(o,"text/xml"),e=Array.from(l.querySelectorAll("item")).slice(0,5);if(e.length===0){const s=await(await fetch(`${f}${encodeURIComponent(`https://www.goodreads.com/review/list_rss/${g}?shelf=read`)}`)).text(),a=n.parseFromString(s,"text/xml"),i=Array.from(a.querySelectorAll("item")).slice(0,5);if(i.length===0){t.innerHTML='<p class="interest-placeholder">Geen boeken gevonden.</p>';return}b(t,i,n,"Gelezen");return}b(t,e,n,"Aan het lezen")}catch{t.innerHTML='<p class="interest-placeholder">Kon Goodreads niet laden.</p>'}}function b(t,r,o,n){const l=r.map(e=>{const c=e.querySelector("title")?.textContent||"",s=e.querySelector("link")?.textContent||"#",a=e.querySelector("author_name")?.textContent||"",i=e.querySelector("description")?.textContent||"",u=(o.parseFromString(i,"text/html").querySelector("img")?.getAttribute("src")||"").replace(/\._\w+\d+_/,"._SX100_");return`
      <a href="${s}" target="_blank" rel="noopener" class="feed-item">
        ${u?`<img src="${u}" alt="${c}" class="feed-art feed-art-book" />`:'<div class="feed-art feed-art-empty"></div>'}
        <div class="feed-info">
          <span class="feed-title">${c}</span>
          <span class="feed-meta">${a}</span>
        </div>
      </a>
    `}).join("");t.innerHTML=l}M();function p(t){return new Intl.NumberFormat("nl-NL").format(t)}async function F(){const t=new Date(2026,1,14),r=new Date(new Date().getFullYear(),0,1),o=new Date,n=Math.floor(t.getTime()/1e3),e=await(await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=${v}&api_key=${D}&format=json&from=${n}&limit=1`)).json(),c=parseInt(e.recenttracks?.["@attr"]?.total||"0",10),s=(o-t)/(1e3*60*60*24),a=(o-r)/(1e3*60*60*24);if(s<1)return c;const i=c/s;return Math.round(i*a)}async function L(){const r=await(await fetch(`${f}${encodeURIComponent(`https://letterboxd.com/${_}/rss/`)}`)).text(),o=new DOMParser().parseFromString(r,"text/xml"),n=new Date().getFullYear();return Array.from(o.querySelectorAll("item")).filter(e=>{const c=e.getElementsByTagName("letterboxd:watchedDate")[0]?.textContent,s=e.querySelector("pubDate")?.textContent,a=c||s||"";return new Date(a).getFullYear()===n}).length}async function k(){const r=await(await fetch(`${f}${encodeURIComponent(`https://www.goodreads.com/review/list_rss/${g}?shelf=read`)}`)).text(),o=new DOMParser().parseFromString(r,"text/xml"),n=new Date().getFullYear();return Array.from(o.querySelectorAll("item")).filter(e=>{const c=e.querySelector("user_read_at")?.textContent,s=e.querySelector("pubDate")?.textContent,a=c||s||"";return a&&new Date(a).getFullYear()===n}).length}async function q(){const[t,r,o]=await Promise.allSettled([F(),L(),k()]),n=document.getElementById("stat-scrobbles"),l=document.getElementById("stat-films"),e=document.getElementById("stat-books");n.textContent=t.status==="fulfilled"?p(t.value):"?",l.textContent=r.status==="fulfilled"?p(r.value):"?",e.textContent=o.status==="fulfilled"?p(o.value):"?"}document.getElementById("stat-scrobbles")&&q();
